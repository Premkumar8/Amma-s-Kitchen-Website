{% for p in products %}
<div class="col-6 col-md-4 col-lg-3 col-xl-2 product-card mb-4">
  <div class="card h-100 shadow rounded-4">
    <a href="{{ url_for('product_detail', product_id=p.id) }}">
      <img src="{{ url_for('static', filename=p.image_url) }}"
           class="card-img-top" alt="{{ p.name }}">
    </a>
    <div class="card-body d-flex flex-column justify-content-between">
      <div>
        <h5 class="card-title">{{ p.name }}</h5>
        <div class="small text-muted">{{ p.qty }}</div>
        <div class="d-flex align-items-center mt-1">
          <span class="badge bg-warning text-dark me-2">{{ p.rating }}</span>
          <svg width="18" height="18" class="text-primary"><use xlink:href="#star-solid"></use></svg>
        </div>
        <div class="fw-bold fs-5 mt-2" style="color:#b91c1c;">â‚¹{{ p.price }}</div>
      </div>
      <form action="{{ url_for('add_to_cart', product_id=p.id) }}" method="POST" class="d-flex align-items-center gap-2 mt-3">
        <input type="number" name="quantity" min="1" value="1" class="form-control form-control-sm w-50">
        <button type="submit" class="btn btn-success btn-sm flex-fill">
          <i class="bi bi-cart"></i> Add to Cart
        </button>
      </form>
    </div>
  </div>
</div>
{% endfor %}
{% if has_next %}
<div class="text-center mt-4 w-100">
  <button id="load-more-btn" class="btn btn-outline-primary btn-lg"
          data-next-page="{{ next_page }}">
    Load More
  </button>
</div>
{% endif %}